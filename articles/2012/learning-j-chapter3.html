<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf=8"></meta>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
  <meta name="viewport" content="width=device-width, initial-scale=1"></meta>

  <title>#dogfeet - J언어 배우기 - 제 3장: 함수 정의하기</title>
  <meta name="description"
    content="Roger Stokes이 쓴 Learning J 의 chapter 3:Defining Functions를 번역/정리했다. 이전 챕터들은 본 사이트에서 J언어 태그로 검색해 볼 수 있다."></meta>
  <meta name="keywords"
    content="J,jsoftware,language,J언어"></meta>
  <meta name="author"
    content="Yongjae Choi"></meta>

  <link rel="shortcut icon" href="images/favicon.ico"></link>
  <link rel="apple-touch-icon" href="images/apple-touch-icon.png"></link>
  <link rel="apple-touch-icon" sizes="72x72"
    href=" ='images/apple-touch-icon-72x72.png"></link>
  <link rel="apple-touch-icon" sizes="114x114"
    href="images/apple-touch-icon-114x114.png"></link>
  <link rel="alternate" type="application/atom+xml"
    title="J언어 배우기 - 제 3장: 함수 정의하기 &raquo; Feed"
    href="http://feeds.feedburner.com/github/dogfeet"></link>

  <link rel="stylesheet" media="screen, projection"
    href="/bower_components/bootstrap/dist/css/bootstrap.min.css"></link>
  <link rel="stylesheet" media="screen, projection"
    href="/styles/pygment-github.css"></link>
  <link rel="stylesheet" media="screen, projection"
    href="/styles/style.css"></link>

</head>
<body>
  <nav class="navbar navbar-default navbar-static-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">dogfeet</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/site/archive.html">Archive</a></li>
          <li><a href="/site/tagmap.html">Tagmap</a></li>
        </ul>
        <form id="search-form" class="navbar-form navbar-right" action="http://google.com/search" method="get">
          <input type="hidden" name="q" value="site:dogfeet.github.io"></input>
          <input class="form-control" type="text" name="q" results="0" placeholder="Search..."></input>
        </form>
      </div><!--/.nav-collapse -->
    </div>
  </nav>
  <div class="container">
    <div>
      <link rel="stylesheet" media="screen, projection"
  href="/styles/github.css"></link>
<link rel="stylesheet" media="screen, projection"
  href="/styles/markdown.css"></link>

<section class="content">
  <article id="post" class="row post " typeof="sioc:post" about="/articles/2012/learning-j-chapter3.html" lang="ko-kr">
    <div class="col-sm-2 small-font">
      <br /><br />
      <p property="dc:created">2012 May 01</p>
      <p class="small-font top-line"> - by<br /><a href="https://twitter.com/lnyarl/">Yongjae Choi</a></p>
      <div id="social-buttons" class="top-line">
        <ul class="unstyled">
          <li><a class="twitter-share-button" href="https://twitter.com/share"
            data-url="http://dogfeet.github.io/articles/2012/learning-j-chapter3.html" data-via="Yongjae Choi"
            data-count="horizontal" data-lang="en">Tweet</a></li>
          <li><div class="g-plusone" data-size="medium" data-href="http://dogfeet.github.io/articles/2012/learning-j-chapter3.html"></div></li>
          <li><div class="fb-like"
            data-href="http://dogfeet.github.io/articles/2012/learning-j-chapter3.html" data-send="false"
            data-layout="button_count" data-show-faces="false"></div></li>
        </ul>
      </div>

      <p class="small-font top-line"><a href="/site/tagmap.html#j" class="tag">J</a> <a href="/site/tagmap.html#jsoftware" class="tag">jsoftware</a> <a href="/site/tagmap.html#language" class="tag">language</a> <a href="/site/tagmap.html#j언어" class="tag">J언어</a></p>
    </div>

    <div class="col-sm-10">

      <div property="sioc:content"><h1 id="j-3-">J언어 배우기 - 제 3장: 함수 정의하기</h1>
<p>Roger Stokes이 쓴 <a href="http://www.jsoftware.com/docs/help701/learning/contents.htm">Learning J</a> 의 chapter 3:Defining Functions를 번역/정리했다. 이전 챕터들은 본 사이트에서 <a href="/site/tagmap.html#j언어">J언어 태그</a>로 검색해 볼 수 있다.</p>
<p><img src="/articles/2012/learning_j_chapter3/jcode.png" alt="j code"></p>
<p>J에는 많은 내장 함수가 있다. 우리는 그 중 몇 가지를 살펴보았다.(<code>*</code>나 <code>+</code>같은 것들) 이번 섹션에서는 이 내장함수를 조합해 원하는 함수를 정의하는 여러 방법을 배운다.</p>
<h2 id="3-1-">3.1 이름짓기</h2>
<p>함수를 정의하는 가장 간단한 방법은 그냥 원하는 내장 함수에 이름을 부여하는 것이다. 정의는 할당 함수를 이용해서 한다. 예를 들어서 아래의 <code>square</code>함수는 내장 함수인 <code>*:</code>를 이용하는 것과 똑같다.</p>
<pre><code>   square =: *:

   square 1 2 3 4
1 4 9 16
</code></pre><p>우리가 지은 이름이 더 기억하기 쉽거나 해서 그게 좋다면 새로운 이름을 사용한다. 같은 내장 함수에 다른 두 개의 이름을 부여할 수도 있다. 하나는 모나딕용으로, 다른 하나는 다이아딕 용으로.</p>
<pre><code>   Ceiling =: &gt;.
   Max     =: &gt;.
</code></pre><table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>Ceiling 1.7</tt></td>
<td><tt>3 Max 4</tt></td>
</tr><tr valign="TOP">
<td><tt>2</tt></td>
<td><tt>4</tt></td>
</tr></tbody></table>

<h2 id="3-2-">3.2 삽입하기</h2>
<p>표현식 <code>+/ 2 3 4</code>는 의미가 <code>2 + 3 + 4</code>와 같고 비슷하게 <code>*/ 2 3 4</code>는 <code>2 * 3 * 4</code>와 같다. 이제 이 함수에 <code>sum</code>이라는 이름을 붙여보자.</p>
<pre><code>   sum =: + /

   sum 2 3 4
9
</code></pre><p><code>sum =: +/</code>라는 코드를 보면 <code>+/</code>가 이 자체로 함수를 표현하는 표현식임을 알 수 있다.
<code>+/</code>는 &quot;Insert&quot;(<code>/</code>)가 함수 <code>+</code>에 적용되어 리스트를 합치는 함수가 되었다 라고 말한다.</p>
<p>즉, <code>/</code>은 그 자체로 함수의 한 종류이다. 이 함수는 왼쪽에 인자 하나를 받는다. 그 인자도 함수고 계산 결과도 함수다.</p>
<h2 id="3-3-">3.3 용어: 동사, 연산자, 부사</h2>
<p>우리는 두 종류의 함수를 봤다. 첫째로 &quot;일반적인&quot; 함수다. 숫자를 계산해서 숫자를 내뱉는 <code>+</code>나 <code>*</code>같은 함수. J에서는 이런 것들을 &quot;동사&quot;라고 한다. 둘째로 함수를 계산해서 함수를 내뱉는 <code>/</code>같은 함수이다. 이런 종류의 함수를 다른 종류의 함수와는 구별하여 &quot;연산자&quot;라고 한다.</p>
<p>하나의 인자를 받는 연산자는 &quot;부사&quot;라고 한다. 부사는 항상 왼쪽에 하나의 인자를 받는다. 그래서 표현식 <code>+ /</code>에서 부사 <code>/</code>는 동사 <code>+</code>에 적용되어서 리스트를 더하는 동사가 만들어진다.</p>
<p>용어는 영어구문에서 따왔다. 동사는 물건의 행동을 묘사하고 부사는 동사의 의미를 변한다.</p>
<h2 id="3-4-commuting-">3.4 교환하기(Commuting)</h2>
<p>부사 <code>/</code>말고 다른것도 보자. 부사 <code>~</code>는 왼쪽과 오른쪽의 인자를 서로 바꾸는 기능이 있다.</p>
<table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>&#39;a&#39; , &#39;b&#39;</tt></td>
<td><tt>&#39;a&#39; ,~ &#39;b&#39;</tt></td>
</tr><tr valign="TOP">
<td><tt>ab</tt></td>
<td><tt>ba</tt></td>
</tr></tbody></table>

<p>다이아드 함수 <code>f</code>와 그 인자 <code>x</code>, <code>y</code>에 대해서 <code>~</code>의 구조는 다음과 같다.</p>
<pre><code>         x f~ y      는   y f x   이다
</code></pre><p>또 다른 예로 동사 <code>|</code>를 기억하는가? <code>2|7</code>은 &quot;7 mod 2&quot;와 같다. 이제 mod함수를 정의 할 차례이다.</p>
<pre><code>   mod =: | ~
</code></pre><table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>7 mod 2</tt></td>
<td><tt>2 | 7</tt></td>
</tr><tr valign="TOP">
<td><tt>1</tt></td>
<td><tt>1</tt></td>
</tr></tbody></table>

<p>그림을 한번 그려보자. 우선 함수 f에 인자 y를 적용해 <code>f y</code>의 결과를 반환하는 다이어그램이 있다. 이 다이어그램에서 함수 f는 사각형으로 그리고 인자가 어떻게 흘러서 결과가 나타나는지 화살표로 나타낸다. 각각의 화살표에는 표현식이 쓰여있다.</p>
<p><img src="/articles/2012/learning_j_chapter3/diag01.gif" alt="monadic"></p>
<p>아래에 다이아딕 함수 f에 인자 x, y를 적용해 <code>x f y</code>가 만들어지는 다이어그램이 있다.</p>
<p><img src="/articles/2012/learning_j_chapter3/diag02.gif" alt="dyadic"></p>
<p>이것이 함수 <code>f~</code>에 대한 다이어그램이다. 상자 안에 함수 f가 있고 인자가 서로 엇갈려서 들어가는 그림으로 나타냈다.</p>
<p><img src="/articles/2012/learning_j_chapter3/diag03.gif" alt="~"></p>
<h2 id="3-5-bonding-">3.5 묶기(Bonding)</h2>
<p>double이라는 동사를 정의해야한다고 가정해보자. <code>double x</code>는 <code>x * 2</code>를 뜻한다. 즉 double은 &quot;곱하기 2&quot;이다. 아래와 같이 정의할 수 있다.</p>
<pre><code>   double =: * &amp; 2

   double 3
6
</code></pre><p>우리는 <code>*</code>를 두 인자중 한 인자를 미리 정해놓고(이 경우엔 2) 그걸 마치 모나드 처럼 써서 <code>*</code>를 다이아드로 사용했다. <code>&amp;</code> 연산자는 함수와 값을 묶어놓는 역할을 한다. f가 다이아딕 함수이고 k가 f의 오른쪽 인자라면 다음과 같은 구조를 가진다.</p>
<pre><code>        (f &amp; k) y    은    y f k   이다.
</code></pre><p>오른쪽 인자말고 왼쪽 인자를 고정하고 싶다면 아래와 같이 쓸 수 있다.</p>
<pre><code>        (k &amp; f)  y   은    k f y   이다
</code></pre><p>예를 들어서 물건 값의 10% 세금은 계산해야 한다고 하자. 그러면 세액을 계산하는 함수는 다음과 같다.</p>
<pre><code>   tax =: 0.10 &amp; *

   tax 50
5
</code></pre><p>아래에 <code>k&amp;f</code>함수의 다이어그램이 있다.</p>
<p><img src="/articles/2012/learning_j_chapter3/diag04.gif" alt="bond"></p>
<h2 id="3-6-">3.6 용어: 접속사와 동사</h2>
<p>표현식 <code>*&amp;2</code>는 <code>&amp;</code> 연산자는 두 인자(동사 <code>*</code>와 숫자 2)를 받는 함수이며 그 결과로 &quot;doubling&quot;이라는 동사를 만들어낸다.
<code>&amp;</code>와 같은 두 인자를 취하는 &quot;연산자&quot;를 J에서는 &quot;접속사&quot;라고 한다. 이는 두 인자를 묶어주기 때문이다. 반면에 부사는 하나의 인자만을 가지는 연산자이다.</p>
<p>J의 모든 함수는 내장 함수이건 사용자 정의 함수이건 반드시 4종류 중 하나이다. 모나딕 동사, 다이아딕 동사, 부사, 접속사가 그것이다. 같은 심볼이지만 다른 의미를 가지는 동사는 두 개의 다른 동사로 간주한다. 예를 들면 <code>-</code>는 모나딕으로는 &quot;negation&quot;이고 다이아딕으로는 &quot;subtraction&quot;이다.</p>
<p>J의 모든 표현식은 어떤 타입을 가진 값이다. 그리고 함수가 아닌 모든 값은 데이터이다.(정확히는 이전 섹션에서 본 배열이다)</p>
<p>J에서 데이터 값, 즉 배열은 &quot;명사&quot;라고 부른다. 이는 영어의 구문과 비슷하다. 이젠 어떤 것이 동사가 아닌 것을 강조하기 위해서 그것을 명사라 부르고, 어떤 차원을 가지고 있다는걸 강조하기 위해서 그것을 배열이라 부른다.</p>
<h2 id="3-7-composition-">3.7 함수의 합성(composition)</h2>
<p>이런 영어 표현을 생각해보자. &quot;the sum of the squares of the numbers 1 2 3&quot; 이건 <code>1+4+9</code> 또는 <code>14</code>이다. 우리가 앞에서 sum과 square동사를 정의 했으니 J로는 다음과 같이 쓸 수 있다.</p>
<pre><code>   sum square 1 2 3
14
</code></pre><p>sum과 square를 합성하여 하나의 &quot;sum-of-the-squares&quot;함수를 만들 수도 있다.</p>
<pre><code>   sumsq =: sum @: square

   sumsq 1 2 3
14
</code></pre><p>심볼 <code>@:</code>(at colon)은 &quot;composition(합성)&quot; 연산자다. f와 g가 동사이고 y라는 인자가 있을때 이 연산자의 구조는 다음과 같다.</p>
<pre><code>       (f @: g) y    는  f (g y)  이다.
</code></pre><p>아래에는 이 구조에 대한 다이어그램이다.</p>
<p><img src="/articles/2012/learning_j_chapter3/diag05.gif" alt="composition"></p>
<p>이 시점에서 독자분들은 동사를 합성할 때 왜 간단하게 <code>f g</code>라고 쓰지 않고 <code>f @: g</code>라고 쓰는지 궁금할 것이다. 간단히 말하자면 <code>f g</code>은 또 다른 의미이다. 이건 곧 나온다.</p>
<p>합성에 대한 다른 예는 화씨를 섭씨로 바꾸는 것이다. 32를 빼는 함수 s와 5%9를 곱하는 함수 m을 합성해보자.</p>
<pre><code>   s       =: - &amp; 32
   m       =: * &amp; (5%9)
   convert =: m @: s
</code></pre><table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>s 212</tt></td>
<td><tt>m s 212</tt></td>
<td><tt>convert 212</tt></td>
</tr><tr valign="TOP">
<td><tt>180</tt></td>
<td><tt>100</tt></td>
<td><tt>100</tt></td>
</tr></tbody></table>

<p>이 예제는 이름있는 함수의 합성을 잘 보여준다. 다음과 같이 함수의 표현식 자체를 합성 할 수도 있다.</p>
<pre><code>   conv =: (* &amp; (5%9)) @: (- &amp; 32)
   conv 212
100
</code></pre><p>합성한 함수에 이름을 주지 않고서도 인자를 적용시켜 사용할 수 있다.</p>
<pre><code>   (* &amp; (5%9)) @: (- &amp; 32)  212
100
</code></pre><p>위 예제들로 모나드와 모나드를 합성한 것을 보였다. 다음 예제는 다이아드를 합성한 것이다. 일반적인 구조는 다음과 같다.</p>
<pre><code>           x (f @: g) y   은    f (x g y)   이다.
</code></pre><p>예를 들어서 아이템 몇 개를 구매한 총 금액은 각 아이템의 가격에 개 수를 곱하고 곱한 값을 더하면 알 수 있다. 아래를 보자.</p>
<pre><code>   P =:  2 3        NB. 가격
   Q =:  1 100      NB. 개 수

   total =: sum @: *
</code></pre><table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>P</tt></td>
<td><tt>Q</tt></td>
<td><tt>P<em>Q</tt></td>
<td><tt>sum P </em> Q</tt></td>
<td><tt>P total Q</tt></td>
</tr><tr valign="TOP">
<td><tt>2 3</tt></td>
<td><tt>1 100</tt></td>
<td><tt>2 300</tt></td>
<td><tt>302</tt></td>
<td><tt>302</tt></td>
</tr></tbody></table>

<p>합성에 대해서 더 알고 싶으면 8장을 보라.</p>
<h2 id="3-8-trains-of-verbs-">3.8 동사의 연결(Trains of Verbs)</h2>
<p>&quot;no pain, no gain&quot;이라는 문구를 아는가. 이것은 압축되고 요약된 관용적 표현이다. 이런 말은 문법적 구조에는 맞지 않지만 제법 알아들을 수 있다. (메인 동사가 없으므로 문장이 아니다) J에는 이와 비슷하게 함수를 몇 개 연결해서 특정한 의미가 되도록 하는 표기법이 있다. 아래에 그 방법이 나온다.</p>
<h3 id="3-8-1-hooks-">3.8.1 훅(Hooks)</h3>
<p>위에서 정의했던 세금을 계산하는 동사를 다시 가져오자. 이 동사에서 세율은 10%였다.</p>
<pre><code>   tax =: 0.10 &amp; *
</code></pre><p>지불해야 하는 금액은 물건 가격 더하기 세금이다. 지불해야 하는 금액을 계산하는 동사는 다음과 같이 작성 할 수 있다.</p>
<pre><code>   payable =: + tax
</code></pre><p>만약 물건 가격이 50달러 라면, 아래와 같이 계산할 수 있다.</p>
<table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>tax 50</tt></td>
<td><tt>50 + tax 50</tt></td>
<td><tt>payable 50</tt></td>
</tr><tr valign="TOP">
<td><tt>5</tt></td>
<td><tt>55</tt></td>
<td><tt>55</tt></td>
</tr></tbody></table>

<p><code>payable =: + tax</code>라는 정의를 보면 <code>+</code>동사 다음에 곧바로 <code>tax</code>가 온다. 이 시퀀스는 할당 연산자 오른쪽에 위치함으로써 분리되어있다.(isolated) 이렇게 분리된 동사의 시퀀스를 &quot;train&quot;이라고 부르고 동사 2개의 train을 &quot;hook&quot;(훅)이라고 부른다.</p>
<p>두 개의 동사를 괄호 안에 넣어 분리시켜 훅의 형태로 사용할 수 있다.</p>
<pre><code>   (+ tax) 50
55
</code></pre><p>f가 다이아드, g가 모나드이고 y라는 어떤 인자가 있을때 훅의 일반적인 구조는 다음과 같다.</p>
<pre><code>        (f g) y       는   y f (g y)   이다.
</code></pre><p>이 구조를 다이어그램으로 나타내면 다음과 같다.</p>
<p><img src="/articles/2012/learning_j_chapter3/diag06.gif" alt="hook"></p>
<p>또다른 예로 인자로 들어온 수의 정수 부분을 계산하는 동사인 <code>&lt;.</code>(&quot;floor&quot;)를 이용해보자. 숫자가 정수인지 아닌지 검사를 하려면 그 숫자가 정수부와 같은지 검사한다. &quot;equal-to-its-floor&quot;라는 의미를 가진 이 동사는 <code>= &lt;.</code>라는 훅으로 정의할 수 있다.</p>
<pre><code>   wholenumber  =:  = &lt;.
</code></pre><table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>y =: 3 2.7</tt></td>
<td><tt>&lt;. y</tt></td>
<td><tt>y = &lt;. y</tt></td>
<td><tt>wholenumber y</tt></td>
</tr><tr valign="TOP">
<td><tt>3 2.7</tt></td>
<td><tt>3 2</tt></td>
<td><tt>1 0</tt></td>
<td><tt>1 0</tt></td>
</tr></tbody></table>

<h3 id="3-8-2-forks-">3.8.2 포크(Forks)</h3>
<p>숫자 리스트 L의 산술 평균은 L의 합을 L의 아이템 개 수로 나눈 것이다.(아이템 개 수를 세는 모나딕 동사인 <code>#</code>는 기억하고 있겠지?)</p>
<table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>L =: 3 5 7 9</tt></td>
<td><tt>sum L</tt></td>
<td><tt># L</tt></td>
<td><tt>(sum L) % (# L)</tt></td>
</tr><tr valign="TOP">
<td><tt>3 5 7 9</tt></td>
<td><tt>24</tt></td>
<td><tt>4</tt></td>
<td><tt>6</tt></td>
</tr></tbody></table>

<p>합을 아이템 개 수로 나누기 계산을 하는 동사는 세가지 동사의 시퀀스로 나타낼 수 있다. <code>sum</code> 다음에 <code>%</code>다음에 <code>#</code>가 오면 된다.</p>
<pre><code>   mean =: sum % #

   mean L
6
</code></pre><p>세 동사의 분리된 시퀀스는 &quot;fork(포크)&quot;라고 한다. 임의의 인자 y에 대해서 f가 모나드이고 g가 다이아드이고 h가 모나드일 때 다음과 같은 일반적인 구조를 지닌다.</p>
<pre><code>        (f g h) y     는   (f y) g (h y)   이다.
</code></pre><p>이 구조를 다이어그램으로 나타내면 아래와 같다.</p>
<p><img src="/articles/2012/learning_j_chapter3/diag06.gif" alt="hook"></p>
<p>포크에 대한 다른 예로는 숫자 리스트의 범위를 구하는 것이 있다. 숫자 리스트의 범위는 리스트에서 가장 작은 수와 가장 큰 수를 구하는 것이다. 이는 최소, 최대를 구하는 동사 중간에 콤마 동사를 넣어 포크하면 된다.</p>
<p>리스트에서 가장 큰 수를 구하는 함수 <code>&gt;./</code>와 가장 작은 수를 구하는 함수 <code>&lt;./</code>는 1장에서 배웠다.</p>
<pre><code>   range =: &lt;./  ,  &gt;./
</code></pre><table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>L</tt></td>
<td><tt>range L</tt></td>
</tr><tr valign="TOP">
<td><tt>3 5 7 9</tt></td>
<td><tt>3 9</tt></td>
</tr></tbody></table>

<p>훅과 포크는 동사의 시퀀스이다. 이는 동사의 &quot;trains&quot; 라고도 말한다. trains에 대해 더 많은 정보를 알려면 제 9장을 참고하라.</p>
<h2 id="3-9-putting-things-together-">3.9 다 집어넣고 보자(Putting Things Together)</h2>
<p>이제까지 배운 것들 중 몇가지를 섞어서 좀 더 커다란 예제를 만들어보자
어떤걸 만들꺼냐면, 숫자 리스트를 보여주고 각 숫자가 전체에서 몇 퍼센트를 차지하는지 보여주는 간단한 표를 만들 예정이다.</p>
<p>어떤걸 만들어야 하는지 명확히 하기 위해 우선 완성된 예제를 먼저 보자. 아래에 설명 할 것이기 때문에 당장에 이 모든걸 알 필요는 없다. 그냥 아래 6라인의 코드를 보고 어떤 동사가 정의되어 있는지 살펴보자.</p>
<pre><code>   percent  =: (100 &amp; *) @: (% +/)
   round    =: &lt;. @: (+&amp;0.5)
   comp     =: round @: percent
   br       =: ,.  ;  (,. @: comp)
   tr       =: (&#39;Data&#39;;&#39;Percentages&#39;) &amp; ,
   display  =: (2 2 &amp; $) @: tr @: br
</code></pre><p>간단한 데이터로 시작해보자.</p>
<pre><code>   data =: 3 5
</code></pre><p>이 데이터를 이용하면 <code>display</code>동사는 각 숫자와 그 숫자의 퍼센트를 표현할 것이다. 아래 표를 보자면, 3은 8에서 38%를 차지한다.</p>
<pre><code>   display data
+----+-----------+
|Data|Percentages|
+----+-----------+
|3   |38         |
|5   |63         |
+----+-----------+
</code></pre><p><code>percent</code>동사는 훅 <code>% +/</code>으로 전체 수에서 각각의 수를 나누고 각각에 100을 곱해서 퍼센트를 계산해낸다. 아래에 <code>percent</code>의 정의를 다시 쓸테니 위로 스크롤 하지 않아도 된다.</p>
<pre><code>   percent  =: (100 &amp; *) @: (% +/)
</code></pre><p>이를 사용해보자.</p>
<table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>data</tt></td>
<td><tt>+/ data</tt></td>
<td><tt>data % +/ data</tt></td>
<td><tt>(% +/) data</tt></td>
<td><tt>percent data</tt></td>
</tr><tr valign="TOP">
<td><tt>3 5</tt></td>
<td><tt>8</tt></td>
<td><tt>0.375 0.625</tt></td>
<td><tt>0.375 0.625</tt></td>
<td><tt>37.5 62.5</tt></td>
</tr></tbody></table>

<p>퍼센트 값을 반올림하자. 반올림은 각 값에 0.5를 더하고 &quot;floor&quot;(<code>&lt;.</code>)를 이용해 정수 부분만을 취한다. 이런 일을 하는 동사 <code>round</code>는 아래와 같이 정의한다.</p>
<pre><code>   round    =: &lt;. @: (+&amp;0.5)
</code></pre><p>그러면 화면에 표시할 값을 계산하는 동사는 다음과 같다.</p>
<pre><code>   comp     =: round @: percent
</code></pre><table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>data</tt></td>
<td><tt>comp data</tt></td>
</tr><tr valign="TOP">
<td><tt>3 5</tt></td>
<td><tt>38 63</tt></td>
</tr></tbody></table>

<p>이제 테이블에 데이터와 퍼센트로 계산된 값을 표현해야 한다. 리스트를 하나의 열(column)을 만들기 위해선 동사 <code>,.</code>를 사용할 수 있다.(&quot;Ravel Items&quot;라고 부른다)</p>
<table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>data</tt></td>
<td><tt>,. data</tt></td>
<td><tt>,. comp data</tt></td>
</tr><tr valign="TOP">
<td><tt>3 5</tt></td>
<td><tt>3<br>
5</tt></td>
<td><tt>38<br>
63</tt></td>
</tr></tbody></table>

<p>테이블의 아래쪽 행을 만들기 위해 <code>br</code> 이라는 동사를 정의한다. 이 동사는 데이타와 계산된 값을 열(column)로 링크하는 포크이다.(포크는 위에서 정의했듯이 세 동사의 시퀀스이다.)</p>
<pre><code>   br  =: ,.  ;  (,. @: comp)
</code></pre><table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>data</tt></td>
<td><tt>br data</tt></td>
</tr><tr valign="TOP">
<td><tt>3 5</tt></td>
<td><tt>+-+--+<br>
|3|38|<br>
|5|63|<br>
+-+--+</tt></td>
</tr></tbody></table>

<p>테이블의 위쪽 행(컬럼 헤딩)은 간단하게 만들 수 있다. 아래쪽 행은 두 박스의 리스트이다. 우리가 그 앞에 두 개의 박스를 더 붙이면 박스가 4개인 리스트가 된다. 동사 <code>tr</code>이 그 작업을 한다.</p>
<pre><code>   tr  =: (&#39;Data&#39;;&#39;Percentages&#39;) &amp; ,
</code></pre><table style="margin:20px 0px" cellpadding="10" border="1">
<tbody><tr valign="TOP">
<td><tt>data</tt></td>
<td><tt>br data</tt></td>
<td><tt>tr br data</tt></td>
</tr><tr valign="TOP">
<td><tt>3 5</tt></td>
<td><tt>+-+--+<br>
|3|38|<br>
|5|63|<br>
+-+--+</tt></td>
<td><tt>+----+-----------+-+--+<br>
|Data|Percentages|3|38|<br>
|&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|5|63|<br>
+----+-----------+-+--+</tt></td>
</tr></tbody></table>

<p>남은건 박스 4개의 리스트를 2행 2열의 테이블로 만드는 것이다.</p>
<pre><code>   (2 2 &amp; $)  tr br data
+----+-----------+
|Data|Percentages|
+----+-----------+
|3   |38         |
|5   |63         |
+----+-----------+
</code></pre><p>이걸 다 합하면,</p>
<pre><code>   display =: (2 2 &amp; $) @: tr @: br

   display data
+----+-----------+
|Data|Percentages|
+----+-----------+
|3   |38         |
|5   |63         |
+----+-----------+
</code></pre><p>이렇게 된다.</p>
<p><code>display</code>동사는 두 부분으로 나눈다. 반올림된 퍼센트 값을 계산하는 <code>comp</code>함수와 화면에 결과를 표시하는 나머지 부분이 그것이다. <code>comp</code>함수를 바꾸어 다른 함수를 사용하면 그 함수의 계산 결과를 표 형태로 표시한다. <code>comp</code>를 제곱근을 계산하는 <code>%:</code>함수로 바꿔보자.</p>
<pre><code>   comp =: %:
</code></pre><p>동사 <code>tr</code>에 있는 표의 컬럼 헤딩도 알맞게 수정해야한다.</p>
<pre><code>   tr   =: (&#39;Numbers&#39;;&#39;Square Roots&#39;) &amp; ,

   display 1 4 9 16
+-------+------------+
|Numbers|Square Roots|
+-------+------------+
| 1     |1           |
| 4     |2           |
| 9     |3           |
|16     |4           |
+-------+------------+
</code></pre><p>J의 몇몇 특징적인 기능(묶기, 합성, 훅, 포크)을 이용해서 조그마한 J프로그램을 작성해보았다. 모든 J 프로그램과 마찬가지로 이 프로그램은 이걸 작성하는 많은 방법중에 하나일 뿐이다.
이 장에서 우리는 함수를 정의하는 방법을 배웠다. 함수는 두 종류가 있다. 동사와 연산자. 지금까지 우리는 동사의 정의하는 것을 보았다. 다음 장에서는 동사를 정의하는 다른 방법을 알아 볼 것이다. 그리고 제 13장에서는 연산자를 정의하는 방법을 배운다.</p>
<p>이렇게 제 3장이 끝났다.</p>
</div>
    </div>
  </article>
</section>

<div id="fb-root"></div>
<script src="//connect.facebook.net/en_US/all.js#xfbml=1"></script>
<script src="http://platform.twitter.com/widgets.js"></script>
<script src="https://apis.google.com/js/plusone.js"></script>

    </div>
    <footer class="footer"><p>Copyright &copy; 2008+ Dogfeet from coding to pixels</p></footer>
  </div>

  <script src="/bower_components/jquery/dist/jquery.js"></script>
  <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/scripts/script.js"></script>

  <script>
    if( 'http://dogfeet.github.io/' === 'http://' + window.location.hostname ) {
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-27493298-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    }
  </script>
</body>
</html>
